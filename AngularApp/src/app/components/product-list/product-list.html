<div class="dashboard-layout">
  <app-header></app-header>
  
  <div class="main-container">
    <app-sidebar></app-sidebar>
    
    <main class="content-area">
      <div class="product-list-container">
        <!-- Header Section -->
        <div class="page-header">
          <div class="header-content">
            <div class="title-section">
              <h1>Product Management</h1>
              <p>Manage your product inventory with ease</p>
            </div>
            <button class="btn-add-product" (click)="addProduct()">
              <span class="icon">‚ûï</span>
              Add New Product
            </button>
          </div>
        </div>

  <!-- Filters and Search Section -->
  <div class="filters-section">
    <div class="search-container">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchTerm"
          (input)="onSearch()"
          placeholder="Search products by name..."
          class="search-input"
        >
        <span class="search-icon">üîç</span>
      </div>
    </div>

    <div class="filter-container">
      <select 
        [(ngModel)]="selectedCategory"
        (change)="onCategoryChange()"
        class="category-filter"
      >
        <option *ngFor="let category of categories" [value]="category === 'All' ? '' : category">
          {{ category }}
        </option>
      </select>
    </div>

    <div class="results-info">
      <span>Showing {{ getPaginatedProducts().length }} of {{ totalItems }} products</span>
    </div>
  </div>

  <!-- Products Table -->
  <div class="table-container">
    <table class="products-table">
      <thead>
        <tr>
          <th (click)="sortBy('productId')" class="sortable">
            ID {{ getSortIcon('productId') }}
          </th>
          <th (click)="sortBy('name')" class="sortable">
            Product Name {{ getSortIcon('name') }}
          </th>
          <th (click)="sortBy('category')" class="sortable">
            Category {{ getSortIcon('category') }}
          </th>
          <th (click)="sortBy('price')" class="sortable">
            Price {{ getSortIcon('price') }}
          </th>
          <th (click)="sortBy('stockQuantity')" class="sortable">
            Stock {{ getSortIcon('stockQuantity') }}
          </th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr 
          *ngFor="let product of getPaginatedProducts()" 
          class="product-row"
          [class.low-stock]="product.stockQuantity < 10"
          [class.out-of-stock]="product.stockQuantity === 0"
        >
          <td class="product-id">{{ product.productId }}</td>
          <td class="product-name">
            <div class="name-content">
              <strong>{{ product.name }}</strong>
            </div>
          </td>
          <td class="category">
            <span class="category-badge">{{ product.category }}</span>
          </td>
          <td class="price">{{ formatCurrency(product.price) }}</td>
          <td class="stock">{{ product.stockQuantity }}</td>
          <td class="status">
            <span 
              class="status-badge" 
              [class]="getStockStatus(product.stockQuantity)"
            >
              {{ getStockStatusText(product.stockQuantity) }}
            </span>
          </td>
          <td class="actions">
            <button 
              class="btn-action btn-edit" 
              (click)="editProduct(product)"
              title="Edit Product"
            >
              ‚úèÔ∏è
            </button>
            <button 
              class="btn-action btn-delete" 
              (click)="deleteProduct(product)"
              title="Delete Product"
            >
              üóëÔ∏è
            </button>
          </td>
        </tr>
        
        <!-- Empty State -->
        <tr *ngIf="getPaginatedProducts().length === 0" class="empty-state">
          <td colspan="7" class="empty-message">
            <div class="empty-content">
              <span class="empty-icon">üì¶</span>
              <h3>No products found</h3>
              <p *ngIf="searchTerm || selectedCategory; else noProductsMessage">
                Try adjusting your search criteria or filters.
              </p>
              <ng-template #noProductsMessage>
                <p>Start by adding your first product to the inventory.</p>
                <button class="btn-add-first" (click)="addProduct()">
                  Add Your First Product
                </button>
              </ng-template>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination-container">
    <div class="pagination-info">
      <span>
        Showing {{ getStartIndex() }} to {{ getEndIndex() }} of {{ totalItems }} items
        <span *ngIf="getTotalPages() > 1"> (Page {{ currentPage }} of {{ getTotalPages() }})</span>
      </span>
    </div>
    
    <div class="pagination-right">
      <!-- Items per page -->
      <div class="items-per-page" *ngIf="totalItems > 5">
        <label for="pageSize">Items per page:</label>
        <select 
          id="pageSize" 
          [(ngModel)]="itemsPerPage" 
          (change)="onPageSizeChange()"
          class="page-size-select"
        >
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="20">20</option>
          <option value="50">50</option>
        </select>
      </div>
    
      <!-- Page navigation -->
      <div class="pagination-controls" *ngIf="getTotalPages() > 1">
        <button 
          class="btn-page" 
          (click)="previousPage()" 
          [disabled]="currentPage === 1"
          title="Previous page"
        >
          ‚Üê Previous
        </button>
        
        <button 
          *ngFor="let page of getVisiblePages()"
          class="btn-page"
          [class.active]="currentPage === page"
          (click)="goToPage(page)"
        >
          {{ page }}
        </button>
        
        <button 
          class="btn-page" 
          (click)="nextPage()" 
          [disabled]="currentPage === getTotalPages()"
          title="Next page"
        >
          Next ‚Üí
        </button>
      </div>
    </div>
  </div>
      </div>
    </main>
  </div>
  
  <app-footer></app-footer>
</div>
